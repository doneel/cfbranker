function jstat(){}j=jstat,function(){var t=!1,i=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e){function n(){!t&&this.init&&this.init.apply(this,arguments)}var a=this.prototype;t=!0;var r=new this;t=!1;for(var s in e)r[s]="function"==typeof e[s]&&"function"==typeof a[s]&&i.test(e[s])?function(t,i){return function(){var e=this._super;this._super=a[t];var n=i.apply(this,arguments);return this._super=e,n}}(s,e[s]):e[s];return n.prototype=r,n.constructor=n,n.extend=arguments.callee,n}}(),jstat.ONE_SQRT_2PI=.3989422804014327,jstat.LN_SQRT_2PI=.9189385332046728,jstat.LN_SQRT_PId2=.22579135264472744,jstat.DBL_MIN=2.22507e-308,jstat.DBL_EPSILON=2.220446049250313e-16,jstat.SQRT_32=5.656854249492381,jstat.TWO_PI=6.283185307179586,jstat.DBL_MIN_EXP=-999,jstat.SQRT_2dPI=.79788456080287,jstat.LN_SQRT_PI=.5723649429247,jstat.seq=function(t,i,e){var n=new Range(t,i,e);return n.getPoints()},jstat.dnorm=function(t,i,e,n){null==i&&(i=0),null==e&&(e=1),null==n&&(n=!1);var a=new NormalDistribution(i,e);if(isNaN(t)){if(t.length){for(var r=[],s=0;s<t.length;s++)r.push(a._pdf(t[s],n));return r}throw"Illegal argument: x"}return a._pdf(t,n)},jstat.pnorm=function(t,i,e,n,a){null==i&&(i=0),null==e&&(e=1),null==n&&(n=!0),null==a&&(a=!1);var r=new NormalDistribution(i,e);if(isNaN(t)){if(t.length){for(var s=[],o=0;o<t.length;o++)s.push(r._cdf(t[o],n,a));return s}throw"Illegal argument: x"}return r._cdf(t,n,a)},jstat.dlnorm=function(t,i,e,n){null==i&&(i=0),null==e&&(e=1),null==n&&(n=!1);var a=new LogNormalDistribution(i,e);if(isNaN(t)){if(t.length){for(var r=[],s=0;s<t.length;s++)r.push(a._pdf(t[s],n));return r}throw"Illegal argument: x"}return a._pdf(t,n)},jstat.plnorm=function(t,i,e,n,a){null==i&&(i=0),null==e&&(e=1),null==n&&(n=!0),null==a&&(a=!1);var r=new LogNormalDistribution(i,e);if(isNaN(t)){if(t.length){for(var s=[],o=0;o<t.length;o++)s.push(r._cdf(t[o],n,a));return s}throw"Illegal argument: x"}return r._cdf(t,n,a)},jstat.dbeta=function(t,i,e,n,a){null==n&&(n=0),null==a&&(a=!1);var r=new BetaDistribution(i,e);if(isNaN(t)){if(t.length){for(var s=[],o=0;o<t.length;o++)s.push(r._pdf(t[o],a));return s}throw"Illegal argument: x"}return r._pdf(t,a)},jstat.pbeta=function(t,i,e,n,a,r){null==n&&(n=0),null==r&&(r=!1),null==a&&(a=!0);var s=new BetaDistribution(i,e);if(isNaN(t)){if(t.length){for(var o=[],u=0;u<t.length;u++)o.push(s._cdf(t[u],a,r));return o}throw"Illegal argument: x"}return s._cdf(t,a,r)},jstat.dgamma=function(t,i,e,n,a){null==e&&(e=1),null==n&&(n=1/e),null==a&&(a=!1);var r=new GammaDistribution(i,n);if(isNaN(t)){if(t.length){for(var s=[],o=0;o<t.length;o++)s.push(r._pdf(t[o],a));return s}throw"Illegal argument: x"}return r._pdf(t,a)},jstat.pgamma=function(t,i,e,n,a,r){null==e&&(e=1),null==n&&(n=1/e),null==a&&(a=!0),null==r&&(r=!1);var s=new GammaDistribution(i,n);if(isNaN(t)){if(t.length){for(var o=[],u=0;u<t.length;u++)o.push(s._cdf(t[u],a,r));return o}throw"Illegal argument: x"}return s._cdf(t,a,r)},jstat.dt=function(t,i,e,n){null==n&&(n=!1);var a=new StudentTDistribution(i,e);if(isNaN(t)){if(t.length){for(var r=[],s=0;s<t.length;s++)r.push(a._pdf(t[s],n));return r}throw"Illegal argument: x"}return a._pdf(t,n)},jstat.pt=function(t,i,e,n,a){null==n&&(n=!0),null==a&&(a=!1);var r=new StudentTDistribution(i,e);if(isNaN(t)){if(t.length){for(var s=[],o=0;o<t.length;o++)s.push(r._cdf(t[o],n,a));return s}throw"Illegal argument: x"}return r._cdf(t,n,a)},jstat.plot=function(t,i,e){if(null==t)throw"x is undefined in jstat.plot";if(null==i)throw"y is undefined in jstat.plot";if(t.length!=i.length)throw"x and y lengths differ in jstat.plot";var n={series:{lines:{},points:{}}},a=[];if(void 0==t.length)a.push([t,i]),n.series.points.show=!0;else for(var r=0;r<t.length;r++)a.push([t[r],i[r]]);var s="jstat graph";null!=e&&(null!=e.type&&("l"==e.type?n.series.lines.show=!0:"p"==e.type&&(n.series.lines.show=!1,n.series.points.show=!0)),null!=e.hover&&(n.grid={hoverable:e.hover}),null!=e.main&&(s=e.main));var o=new Date,u=o.getMilliseconds()*o.getMinutes()+o.getSeconds();$("body").append('<div title="'+s+'" style="display: none;" id="'+u+'"><div id="graph-'+u+'" style="width:95%; height: 95%"></div></div>'),$("#"+u).dialog({modal:!1,width:475,height:475,resizable:!0,resize:function(){$.plot($("#graph-"+u),[a],n)},open:function(){$.plot($("#graph-"+u),[a],n)}})},jstat.log10=function(t){return Math.log(t)/Math.LN10},jstat.toSigFig=function(t,i){if(0==t)return 0;var e=Math.ceil(jstat.log10(0>t?-t:t)),n=i-parseInt(e),a=Math.pow(10,n),r=Math.round(t*a);return r/a},jstat.trunc=function(t){return t>0?Math.floor(t):Math.ceil(t)},jstat.isFinite=function(t){return!isNaN(t)&&t!=Number.POSITIVE_INFINITY&&t!=Number.NEGATIVE_INFINITY},jstat.dopois_raw=function(t,i,e){if(0==i)return 0==t?e?0:1:e?Number.NEGATIVE_INFINITY:0;if(!jstat.isFinite(i))return e?Number.NEGATIVE_INFINITY:0;if(0>t)return e?Number.NEGATIVE_INFINITY:0;if(t<=i*jstat.DBL_MIN)return e?-i:Math.exp(-i);if(i<t*jstat.DBL_MIN){var n=-i+t*Math.log(i)-jstat.lgamma(t+1);return e?n:Math.exp(n)}var a=jstat.TWO_PI*t,r=-jstat.stirlerr(t)-jstat.bd0(t,i);return e?-.5*Math.log(a)+r:Math.exp(r)/Math.sqrt(a)},jstat.bd0=function(t,i){var e,n,a,r,s;if(!jstat.isFinite(t)||!jstat.isFinite(i)||0==i)throw"illegal parameter in jstat.bd0";if(Math.abs(t-i)>.1*(t+i))for(r=(t-i)/(t+i),n=(t-i)*r,e=2*t*r,r*=r,s=1;;s++){if(e*=r,a=n+e/((s<<1)+1),a==n)return a;n=a}return t*Math.log(t/i)+i-t},jstat.stirlerr=function(t){var i,e=.08333333333333333,n=.002777777777777778,a=.0007936507936507937,r=.0005952380952380953,s=.0008417508417508417,o=[0,.15342640972002736,.08106146679532726,.05481412105191765,.0413406959554093,.03316287351993629,.02767792568499834,.023746163656297496,.020790672103765093,.018488450532673187,.016644691189821193,.015134973221917378,.013876128823070748,.012810465242920227,.01189670994589177,.011104559758206917,.010411265261972096,.009799416126158804,.009255462182712733,.008768700134139386,.00833056343336287,.00793411456431402,.007573675487951841,.007244554301320383,.00694284010720953,.006665247032707682,.006408994188004207,.006171712263039458,.0059513701127588475,.0057462165130101155,.005554733551962801];return 15>=t?(i=t+t,i==parseInt(i)?o[parseInt(i)]:jstat.lgamma(t+1)-(t+.5)*Math.log(t)+t-jstat.LN_SQRT_2PI):(i=t*t,t>500?(e-n/i)/t:t>80?(e-(n-a/i)/i)/t:t>35?(e-(n-(a-r/i)/i)/i)/t:(e-(n-(a-(r-s/i)/i)/i)/i)/t)},jstat.lgamma=function(t){function i(t,i){var e,n,a,r=2.5327372760800758e305,s=1.4901161193847656e-8;if(null!=i&&(i=1),isNaN(t))return t;if(0>t&&Math.floor(-t)%2==0&&null!=i&&(i=-1),0>=t&&t==jstat.trunc(t))return console.warn("Negative integer argument in lgammafn_sign"),Number.POSITIVE_INFINITY;if(n=Math.abs(t),10>=n)return Math.log(Math.abs(jstat.gamma(t)));if(n>r)return console.warn("Illegal arguement passed to lgammafn_sign"),Number.POSITIVE_INFINITY;if(t>0)return t>1e17?t*(Math.log(t)-1):t>4934720?jstat.LN_SQRT_2PI+(t-.5)*Math.log(t)-t:jstat.LN_SQRT_2PI+(t-.5)*Math.log(t)-t+jstat.lgammacor(t);if(a=Math.abs(Math.sin(Math.PI*n)),0==a)throw"Should never happen!!";if(e=jstat.LN_SQRT_PId2+(t-.5)*Math.log(n)-t-Math.log(a)-jstat.lgammacor(n),Math.abs((t-jstat.trunc(t-.5))*e/t)<s)throw"The answer is less than half the precision argument too close to a negative integer";return e}return i(t,null)},jstat.gamma=function(t){var i,e,n,a,r,s,o,u,l,h,_,f,m=171.624,N=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],g=[-30.840230011973897,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.25967555349],p=[-.001910444077728,.00084171387781295,-.0005952379913043012,.0007936507935003503,-.0027777777777776816,.08333333333333333,.0057083835261];if(n=0,a=1,e=0,o=t,0>=o){if(o=-t,l=jstat.trunc(o),h=o-l,0==h)return Number.POSITIVE_INFINITY;l!=2*jstat.trunc(.5*l)&&(n=1),a=-Math.PI/Math.sin(Math.PI*h),o+=1}if(o<jstat.DBL_EPSILON){if(!(o>=jstat.DBL_MIN))return Number.POSITIVE_INFINITY;h=1/o}else if(12>o){for(l=o,1>o?(u=o,o+=1):(e=parseInt(o)-1,o-=parseFloat(e),u=o-1),s=0,r=1,i=0;8>i;++i)s=(s+N[i])*u,r=r*u+g[i];if(h=s/r+1,o>l)h/=l;else if(l>o)for(i=0;e>i;++i)h*=o,o+=1}else{if(!(m>=o))return Number.POSITIVE_INFINITY;for(f=o*o,_=p[6],i=0;6>i;++i)_=_/f+p[i];_=_/o-o+jstat.LN_SQRT_2PI,_+=(o-.5)*Math.log(o),h=Math.exp(_)}return n&&(h=-h),1!=a&&(h=a/h),h},jstat.lgammacor=function(t){var i,e=[.16663894804518634,-1384948176067564e-20,9.81082564692473e-9,-1.809129475572494e-11,6.221098041892606e-14,-3.399615005417722e-16,2.683181998482699e-18,-2.868042435334643e-20,3.9628370610464347e-22,-6.831888753985767e-24,1.4292273559424982e-25,-3.5475981581010704e-27,1.025680058010471e-28,-3.401102254316749e-30,1.276642195630063e-31],n=5,a=94906265.62425156,r=3.745194030963158e306;if(10>t)return Number.NaN;if(t>=r)throw"Underflow error in lgammacor";return a>t?(i=10/t,jstat.chebyshev(i*i*2-1,e,n)/t):1/(12*t)},jstat.incompleteBeta=function(t,i,e){function n(t,i,e){var n,a,r,s,o,u,l,h,_,f,m=100,N=3e-12,g=1e-30;for(h=t+i,f=t+1,_=t-1,s=1,o=1-h*e/f,Math.abs(o)<g&&(o=g),o=1/o,l=o,n=1;m>=n&&(a=2*n,r=n*(i-n)*e/((_+a)*(t+a)),o=1+r*o,Math.abs(o)<g&&(o=g),s=1+r/s,Math.abs(s)<g&&(s=g),o=1/o,l*=o*s,r=-(t+n)*(h+n)*e/((t+a)*(f+a)),o=1+r*o,Math.abs(o)<g&&(o=g),s=1+r/s,Math.abs(s)<g&&(s=g),o=1/o,u=o*s,l*=u,!(Math.abs(u-1)<N));n++);return n>m?(console.warn("a or b too big, or MAXIT too small in betacf: "+t+", "+i+", "+e+", "+l),l):(isNaN(l)&&console.warn(t+", "+i+", "+e),l)}var a;if(0>e||e>1)throw"bad x in routine incompleteBeta";return a=0==e||1==e?0:Math.exp(jstat.lgamma(t+i)-jstat.lgamma(t)-jstat.lgamma(i)+t*Math.log(e)+i*Math.log(1-e)),(t+1)/(t+i+2)>e?a*n(t,i,e)/t:1-a*n(i,t,1-e)/i},jstat.chebyshev=function(t,i,e){var n,a,r,s,o;if(1>e||e>1e3)return Number.NaN;if(-1.1>t||t>1.1)return Number.NaN;for(s=2*t,r=a=0,n=0,o=1;e>=o;o++)r=a,a=n,n=s*a-r+i[e-o];return.5*(n-r)},jstat.fmin2=function(t,i){return i>t?t:i},jstat.log1p=function(t){var i=0,e=50;if(-1>=t)return Number.NEGATIVE_INFINITY;if(0>t||t>1)return Math.log(1+t);for(var n=1;e>n;n++)n%2===0?i-=Math.pow(t,n)/n:i+=Math.pow(t,n)/n;return i},jstat.expm1=function(t){var i,e=Math.abs(t);return e<jstat.DBL_EPSILON?t:e>.697?Math.exp(t)-1:(i=e>1e-8?Math.exp(t)-1:(t/2+1)*t,i-=(1+i)*(jstat.log1p(i)-t))},jstat.logBeta=function(t,i){var e,n,a;return n=a=t,n>i&&(n=i),i>a&&(a=i),0>n?(console.warn("Both arguements must be >= 0"),Number.NaN):0==n?Number.POSITIVE_INFINITY:jstat.isFinite(a)?n>=10?(e=jstat.lgammacor(n)+jstat.lgammacor(a)-jstat.lgammacor(n+a),Math.log(a)*-.5+jstat.LN_SQRT_2PI+e+(n-.5)*Math.log(n/(n+a))+a*jstat.log1p(-n/(n+a))):a>=10?(e=jstat.lgammacor(a)-jstat.lgammacor(n+a),jstat.lgamma(n)+e+n-n*Math.log(n+a)+(a-.5)*jstat.log1p(-n/(n+a))):Math.log(jstat.gamma(n)*(jstat.gamma(a)/jstat.gamma(n+a))):Number.NEGATIVE_INFINITY},jstat.dbinom_raw=function(t,i,e,n,a){null==a&&(a=!1);var r,s;return 0==e?0==t?a?0:1:a?Number.NEGATIVE_INFINITY:0:0==n?t==i?a?0:1:a?Number.NEGATIVE_INFINITY:0:0==t?0==i?a?0:1:(s=.1>e?-jstat.bd0(i,i*n)-i*e:i*Math.log(n),a?s:Math.exp(s)):t==i?(s=.1>n?-jstat.bd0(i,i*e)-i*n:i*Math.log(e),a?s:Math.exp(s)):0>t||t>i?a?Number.NEGATIVE_INFINITY:0:(s=jstat.stirlerr(i)-jstat.stirlerr(t)-jstat.stirlerr(i-t)-jstat.bd0(t,i*e)-jstat.bd0(i-t,i*n),r=Math.log(jstat.TWO_PI)+Math.log(t)+jstat.log1p(-t/i),a?s-.5*r:Math.exp(s-.5*r))},jstat.max=function(t){for(var i=Number.NEGATIVE_INFINITY,e=0;e<t.length;e++)t[e]>i&&(i=t[e]);return i};var Range=Class.extend({init:function(t,i,e){this._minimum=parseFloat(t),this._maximum=parseFloat(i),this._numPoints=parseFloat(e)},getMinimum:function(){return this._minimum},getMaximum:function(){return this._maximum},getNumPoints:function(){return this._numPoints},getPoints:function(){for(var t=[],i=this._minimum,e=(this._maximum-this._minimum)/(this._numPoints-1),n=0;n<this._numPoints;n++)t[n]=parseFloat(i.toFixed(6)),i+=e;return t}});Range.validate=function(t){return!t instanceof Range?!1:isNaN(t.getMinimum())||isNaN(t.getMaximum())||isNaN(t.getNumPoints())||t.getMaximum()<t.getMinimum()||t.getNumPoints()<=0?!1:!0};var ContinuousDistribution=Class.extend({init:function(t){this._name=t},toString:function(){return this._string},getName:function(){return this._name},getClassName:function(){return this._name+"Distribution"},density:function(t){if(isNaN(t)){if(Range.validate(t)){for(var i=t.getPoints(),e=[],n=0;n<i.length;n++)e[n]=parseFloat(this._pdf(i[n]));return e}throw"Invalid parameter supplied to "+this.getClassName()+".density()"}return parseFloat(this._pdf(t).toFixed(15))},cumulativeDensity:function(t){if(isNaN(t)){if(Range.validate(t)){for(var i=t.getPoints(),e=[],n=0;n<i.length;n++)e[n]=parseFloat(this._cdf(i[n]));return e}throw"Invalid parameter supplied to "+this.getClassName()+".cumulativeDensity()"}return parseFloat(this._cdf(t).toFixed(15))},getRange:function(t,i){null==t&&(t=5),null==i&&(i=100);var e=this.getMean()-t*Math.sqrt(this.getVariance()),n=this.getMean()+t*Math.sqrt(this.getVariance());"GammaDistribution"==this.getClassName()||"LogNormalDistribution"==this.getClassName()?(e=0,n=this.getMean()+t*Math.sqrt(this.getVariance())):"BetaDistribution"==this.getClassName()&&(e=0,n=1);var a=new Range(e,n,i);return a},getVariance:function(){},getMean:function(){},getQuantile:function(t){function i(t,n){for(var a=1e-5,r=t.getPoints(),s=0,o=999,u=0;u<r.length;u++){var l=e.cumulativeDensity(r[u]),h=Math.abs(l-n);o>h&&(s=u,o=h)}if(a>=o)return r[s];var _=new Range(r[s-1],r[s+1],20);return i(_,n)}var e=this,n=this.getRange(5,20);return i(n,t)}}),NormalDistribution=ContinuousDistribution.extend({init:function(t,i){this._super("Normal"),this._mean=parseFloat(t),this._sigma=parseFloat(i),this._string="Normal ("+this._mean.toFixed(2)+", "+this._sigma.toFixed(2)+")"},_pdf:function(t,i){null==i&&(i=!1);var e=this._sigma,n=this._mean;if(!jstat.isFinite(e))return i?Number.NEGATIVE_INFINITY:0;if(!jstat.isFinite(t)&&n==t)return Number.NaN;if(0>=e){if(0>e)throw"invalid sigma in _pdf";return t==n?Number.POSITIVE_INFINITY:i?Number.NEGATIVE_INFINITY:0}return t=(t-n)/e,jstat.isFinite(t)?i?-(jstat.LN_SQRT_2PI+.5*t*t+Math.log(e)):jstat.ONE_SQRT_2PI*Math.exp(-.5*t*t)/e:i?Number.NEGATIVE_INFINITY:0},_cdf:function(t,i,e){function n(t,i,e,n,a){var r,s,o,u,l,h,_,f,m,N,g=[2.2352520354606837,161.02823106855587,1067.6894854603709,18154.98125334356,.06568233791820745],p=[47.202581904688245,976.0985517377767,10260.932208618979,45507.78933502673],d=[.39894151208813466,8.883149794388377,93.50665613217785,597.2702763948002,2494.5375852903726,6848.190450536283,11602.65143764735,9842.714838383978,1.0765576773720192e-8],c=[22.266688044328117,235.387901782625,1519.3775994075547,6485.558298266761,18615.571640885097,34900.95272114598,38912.00328609327,19685.429676859992],I=[.215898534057957,.12740116116024736,.022235277870649807,.0014216191932278934,29112874951168793e-21,.023073441764940174],b=[1.284260096144911,.4682382124808651,.06598813786892856,.0037823963320275824,7297515550839662e-20];if(l=.5*jstat.DBL_EPSILON,m=1!=n,N=0!=n,_=Math.abs(t),.67448975>=_){if(_>l)for(h=t*t,s=g[4]*h,r=h,f=0;3>f;++f)s=(s+g[f])*h,r=(r+p[f])*h;else s=r=0;o=t*(s+g[3])/(r+p[3]),m&&(i=.5+o),N&&(e=.5-o),a&&(m&&(i=Math.log(i)),N&&(e=Math.log(e)))}else if(_<=jstat.SQRT_32){for(s=d[8]*_,r=_,f=0;7>f;++f)s=(s+d[f])*_,r=(r+c[f])*_;o=(s+d[7])/(r+c[7]),h=jstat.trunc(16*t)/16,u=(t-h)*(t+h),a?(i=-h*h*.5+.5*-u+Math.log(o),(m&&t>0||N&&0>=t)&&(e=jstat.log1p(-Math.exp(-h*h*.5)*Math.exp(.5*-u)*o))):(i=Math.exp(-h*h*.5)*Math.exp(.5*-u)*o,e=1-i),t>0&&(o=i,m&&(i=e),e=o)}else if(a&&1e170>_||m&&t>-37.5193&&8.2924>t||N&&t>-8.2924&&37.5193>t){for(h=1/(t*t),s=I[5]*h,r=h,f=0;4>f;++f)s=(s+I[f])*h,r=(r+b[f])*h;o=h*(s+I[4])/(r+b[4]),o=(jstat.ONE_SQRT_2PI-o)/_,h=jstat.trunc(16*t)/16,u=(t-h)*(t+h),a?(i=-h*h*.5+.5*-u+Math.log(o),(m&&t>0||N&&0>=t)&&(e=jstat.log1p(-Math.exp(-h*h*.5)*Math.exp(.5*-u)*o))):(i=Math.exp(-h*h*.5)*Math.exp(.5*-u)*o,e=1-i),t>0&&(o=i,m&&(i=e),e=o)}else t>0?(i=a?0:1,e=a?Number.NEGATIVE_INFINITY:0):(i=a?Number.NEGATIVE_INFINITY:0,e=a?0:1);return[i,e]}null==i&&(i=!0),null==e&&(e=!1);var a,r,s,o,u=this._mean,l=this._sigma;if(i?e?(s=Number.NEGATIVE_INFINITY,o=0):(s=0,o=1):e?(s=0,o=Number.NEGATIVE_INFINITY):(s=1,o=0),!jstat.isFinite(t)&&u==t)return Number.NaN;if(0>=l)return 0>l?(console.warn("Sigma is less than 0"),Number.NaN):u>t?s:o;if(a=(t-u)/l,!jstat.isFinite(a))return u>t?s:o;t=a;var h=n(t,a,r,i?!1:!0,e);return i?h[0]:h[1]},getMean:function(){return this._mean},getSigma:function(){return this._sigma},getVariance:function(){return this._sigma*this._sigma}}),LogNormalDistribution=ContinuousDistribution.extend({init:function(t,i){this._super("LogNormal"),this._location=parseFloat(t),this._scale=parseFloat(i),this._string="LogNormal ("+this._location.toFixed(2)+", "+this._scale.toFixed(2)+")"},_pdf:function(t,i){var e,n=this._scale,a=this._location;if(null==i&&(i=!1),0>=n)throw"Illegal parameter in _pdf";return 0>=t?i?Number.NEGATIVE_INFINITY:0:(e=(Math.log(t)-a)/n,i?-(jstat.LN_SQRT_2PI+.5*e*e+Math.log(t*n)):jstat.ONE_SQRT_2PI*Math.exp(-.5*e*e)/(t*n))},_cdf:function(t,i,e){var n=this._scale,a=this._location;if(null==i&&(i=!0),null==e&&(e=!1),0>=n)throw"illegal std in _cdf";if(t>0){var r=new NormalDistribution(a,n);return r._cdf(Math.log(t),i,e)}return i?e?Number.NEGATIVE_INFINITY:0:e?0:1},getLocation:function(){return this._location},getScale:function(){return this._scale},getMean:function(){return Math.exp((this._location+this._scale)/2)},getVariance:function(){var t=(Math.exp(this._scale)-1)*Math.exp(2*this._location+this._scale);return t}}),GammaDistribution=ContinuousDistribution.extend({init:function(t,i){this._super("Gamma"),this._shape=parseFloat(t),this._scale=parseFloat(i),this._string="Gamma ("+this._shape.toFixed(2)+", "+this._scale.toFixed(2)+")"},_pdf:function(t,i){var e,n=this._shape,a=this._scale;if(null==i&&(i=!1),0>n||0>=a)throw"Illegal argument in _pdf";return 0>t?i?Number.NEGATIVE_INFINITY:0:0==n?0==t?Number.POSITIVE_INFINITY:i?Number.NEGATIVE_INFINITY:0:0==t?1>n?Number.POSITIVE_INFINITY:n>1?i?Number.NEGATIVE_INFINITY:0:i?-Math.log(a):1/a:1>n?(e=jstat.dopois_raw(n,t/a,i),i?e+Math.log(n/t):e*n/t):(e=jstat.dopois_raw(n-1,t/a,i),i?e-Math.log(a):e/a)},_cdf:function(t,i,e){function n(){a=3*Math.sqrt(I)*(Math.pow(t/I,1/3)+1/(9*I)-1);var n=new NormalDistribution(0,1);return n._cdf(a,i,e)}null==i&&(i=!0),null==e&&(e=!1);var a,r,s,o,u,l,h,_,f,m,N,g,p,d,c,I=this._shape,b=this._scale,M=1e8,j=1e37,v=1e5;if(0>=I||0>=b)return console.warn("Invalid gamma params in _cdf"),Number.NaN;if(t/=b,isNaN(t))return t;if(0>=t)return i?e?Number.NEGATIVE_INFINITY:0:e?0:1;if(I>v)return n();if(t>M*I)return t>jstat.DBL_MAX*I?i?e?0:1:e?Number.NEGATIVE_INFINITY:0:n();if(1>=t||I>t){c=1,h=I*Math.log(t)-t-jstat.lgamma(I+1),m=1,p=1,_=I;do _+=1,m*=t/_,p+=m;while(m>jstat.DBL_EPSILON*p)}else for(c=0,h=I*Math.log(t)-t-jstat.lgamma(I),_=1-I,f=_+t+1,a=1,r=t,s=t+1,o=t*f,p=s/o,d=1;_+=1,f+=2,N=_*d,u=f*s-N*a,l=f*o-N*r,!(Math.abs(l)>0&&(g=p,p=u/l,Math.abs(g-p)<=jstat.DBL_EPSILON*jstat.fmin2(1,p)));d++)a=s,r=o,s=u,o=l,Math.abs(u)>=j&&(a/=j,r/=j,s/=j,o/=j);return h+=Math.log(p),i=i==c,e&&i?h:i?Math.exp(h):e?h>-Math.LN2?Math.log(-jstat.expm1(h)):jstat.log1p(-Math.exp(h)):-jstat.expm1(h)},getShape:function(){return this._shape},getScale:function(){return this._scale},getMean:function(){return this._shape*this._scale},getVariance:function(){return this._shape*Math.pow(this._scale,2)}}),BetaDistribution=ContinuousDistribution.extend({init:function(t,i){this._super("Beta"),this._alpha=parseFloat(t),this._beta=parseFloat(i),this._string="Beta ("+this._alpha.toFixed(2)+", "+this._beta.toFixed(2)+")"},_pdf:function(t,i){null==i&&(i=!1);var e,n=this._alpha,a=this._beta;return 0>=n||0>=a?(console.warn("Illegal arguments in _pdf"),Number.NaN):0>t||t>1?i?Number.NEGATIVE_INFINITY:0:0==t?n>1?i?Number.NEGATIVE_INFINITY:0:1>n?Number.POSITIVE_INFINITY:i?Math.log(a):a:1==t?a>1?i?Number.NEGATIVE_INFINITY:0:1>a?Number.POSITIVE_INFINITY:i?Math.log(n):n:(e=2>=n||2>=a?(n-1)*Math.log(t)+(a-1)*jstat.log1p(-t)-jstat.logBeta(n,a):Math.log(n+a-1)+jstat.dbinom_raw(n-1,n+a-2,t,1-t,!0),i?e:Math.exp(e))},_cdf:function(t,i,e){null==i&&(i=!0),null==e&&(e=!1);var n=this._alpha,a=this._beta;return 0>=n||0>=a?(console.warn("Invalid argument in _cdf"),Number.NaN):0>=t?i?e?Number.NEGATIVE_INFINITY:0:e?.1:1:t>=1?i?e?.1:1:e?Number.NEGATIVE_INFINITY:0:jstat.incompleteBeta(n,a,t)},getAlpha:function(){return this._alpha},getBeta:function(){return this._beta},getMean:function(){return this._alpha/(this._alpha+this._beta)},getVariance:function(){var t=this._alpha*this._beta/(Math.pow(this._alpha+this._beta,2)*(this._alpha+this._beta+1));return t}}),StudentTDistribution=ContinuousDistribution.extend({init:function(t,i){this._super("StudentT"),this._dof=parseFloat(t),null!=i?(this._mu=parseFloat(i),this._string="StudentT ("+this._dof.toFixed(2)+", "+this._mu.toFixed(2)+")"):(this._mu=0,this._string="StudentT ("+this._dof.toFixed(2)+")")},_pdf:function(t,i){if(null==i&&(i=!1),null==this._mu)return this._dt(t,i);var e=this._dnt(t,i);return e>1&&console.warn("x:"+t+", y: "+e),e},_cdf:function(t,i,e){return null==i&&(i=!0),null==e&&(e=!1),null==this._mu?this._pt(t,i,e):this._pnt(t,i,e)},_dt:function(t,i){var e,n,a=this._dof;if(0>=a)return console.warn("Invalid parameters in _dt"),Number.NaN;if(!jstat.isFinite(t))return i?Number.NEGATIVE_INFINITY:0;if(!jstat.isFinite(a)){var r=new NormalDistribution(0,1);return r.density(t,i)}e=-jstat.bd0(a/2,(a+1)/2)+jstat.stirlerr((a+1)/2)-jstat.stirlerr(a/2),n=t*t>.2*a?Math.log(1+t*t/a)*a/2:-jstat.bd0(a/2,(a+t*t)/2)+t*t/2;var s=jstat.TWO_PI*(1+t*t/a),o=e-n;return i?-.5*Math.log(s)+o:Math.exp(o)/Math.sqrt(s)},_dnt:function(t,i){null==i&&(i=!1);var e,n=this._dof,a=this._mu;if(0>=n)return console.warn("Illegal arguments _dnf"),Number.NaN;if(0==a)return this._dt(t,i);if(!jstat.isFinite(t))return i?Number.NEGATIVE_INFINITY:0;if(!isFinite(n)||n>1e8){var r=new NormalDistribution(a,1);return r.density(t,i)}if(Math.abs(t)>Math.sqrt(n*jstat.DBL_EPSILON)){var s=new StudentTDistribution(n+2,a);e=Math.log(n)-Math.log(Math.abs(t))+Math.log(Math.abs(s._pnt(t*Math.sqrt((n+2)/n),!0,!1)-this._pnt(t,!0,!1)))}else e=jstat.lgamma((n+1)/2)-jstat.lgamma(n/2)-.5*(Math.log(Math.PI)+Math.log(n)+a*a);return i?e:Math.exp(e)},_pt:function(t,i,e){null==i&&(i=!0),null==e&&(e=!1);var n,a,r,s,o=this._dof;if(i?e?(r=Number.NEGATIVE_INFINITY,s=1):(r=0,s=1):e?(r=0,s=Number.NEGATIVE_INFINITY):(r=1,s=0),0>=o)return console.warn("Invalid T distribution _pt"),Number.NaN;var u=new NormalDistribution(0,1);if(!jstat.isFinite(t))return 0>t?r:s;if(!jstat.isFinite(o))return u._cdf(t,i,e);if(o>4e5)return n=1/(4*o),u._cdf(t*(1-n)/sqrt(1+t*t*2*n),i,e);if(a=1+t/o*t,!(a>1e100)){if(o>t*t){var l=new BetaDistribution(.5,o/2);return l._cdf(t*t/(o+t*t),!1,e)}return l=new BetaDistribution(o/2,.5),l._cdf(1/a,!0,e)}var h;return h=-.5*o*(2*Math.log(Math.abs(t))-Math.log(o))-jstat.logBeta(.5*o,.5)-Math.log(.5*o),n=e?h:Math.exp(h),0>=t&&(i=!i),e?i?jstat.log1p(-.5*Math.exp(n)):n-M_LN2:(n/=2,i?.5-n+.5:n)},_pnt:function(t,i,e){var n,a,r=this._dof,s=this._mu;i?e?(n=Number.NEGATIVE_INFINITY,a=1):(n=0,a=1):e?(n=0,a=Number.NEGATIVE_INFINITY):(n=1,a=0);var o,u,l,h,_,f,m,N,g,p,d,c,I,b,M,j,v,T,F,w=1e3,D=1e-7;if(0>=r)return Number.NaN;if(0==r)return this._pt(t);if(!jstat.isFinite(t))return 0>t?n:a;if(t>=0)F=!1,N=t,h=s;else{if(s>=40&&(!e||!i))return n;F=!0,N=-t,h=-s}if(r>4e5||h*h>2*Math.LN2*-jstat.DBL_MIN_EXP){b=1/(4*r);var x=new NormalDistribution(h,Math.sqrt(1+N*N*2*b)),E=x._cdf(N*(1-b),i!=F,e);return E}if(g=t*t,m=r/(g+r),g/=g+r,g>0){if(f=h*h,c=.5*Math.exp(-.5*f),0==c)return console.warn("underflow in _pnt"),n;for(I=jstat.SQRT_2dPI*c*h,b=.5-c,1e-7>b&&(b=-.5*jstat.expm1(-.5*f)),u=.5,l=.5*r,m=Math.pow(m,l),o=jstat.LN_SQRT_PI+jstat.lgamma(l)-jstat.lgamma(.5+l),v=jstat.incompleteBeta(u,l,g),d=2*m*Math.exp(u*Math.log(g)-o),M=l*g,j=M<jstat.DBL_EPSILON?M:1-m,p=M*m,M=c*v+I*j,T=1;w>=T;T++){if(u+=1,v-=d,j-=p,d*=g*(u+l-1)/u,p*=g*(u+l-.5)/(u+.5),c*=f/(2*T),I*=f/(2*T+1),M+=c*v+I*j,b-=c,-1e-10>b){console.write("precision error _pnt");break}if(0>=b&&T>1)break;if(_=2*b*(v-d),Math.abs(_)<D)break}if(T==w)throw"Non-convergence _pnt"}else M=0;x=new NormalDistribution(0,1),M+=x._cdf(-h,!0,!1),i=i!=F,M>1-1e-10&&i&&console.warn("precision error _pnt");var P=jstat.fmin2(M,1);return i?e?Math.log(P):P:e?jstat.log1p(-P):.5-P+.5},getDegreesOfFreedom:function(){return this._dof},getNonCentralityParameter:function(){return this._mu},getMean:function(){if(this._dof>1){var t=.5*Math.log(this._dof/2)+jstat.lgamma((this._dof-1)/2)-jstat.lgamma(this._dof/2);return Math.exp(t)*this._mu}return Number.NaN},getVariance:function(){if(this._dof>2){var t=this._dof*(1+this._mu*this._mu)/(this._dof-2)-this._mu*this._mu*this._dof/2*Math.pow(Math.exp(jstat.lgamma((this._dof-1)/2)-jstat.lgamma(this._dof/2)),2);return t}return Number.NaN}}),Plot=Class.extend({init:function(t,i){this._container="#"+String(t),this._plots=[],this._flotObj=null,this._locked=!1,this._options=null!=i?i:{}},getContainer:function(){return this._container},getGraph:function(){return this._flotObj},setData:function(t){this._plots=t},clear:function(){this._plots=[]},showLegend:function(){this._options.legend={show:!0},this.render()},hideLegend:function(){this._options.legend={show:!1},this.render()},render:function(){this._flotObj=null,this._flotObj=$.plot($(this._container),this._plots,this._options)}}),DistributionPlot=Plot.extend({init:function(t,i,e,n){this._super(t,n),this._showPDF=!0,this._showCDF=!1,this._pdfValues=[],this._cdfValues=[],this._maxY=1,this._plotType="line",this._fill=!1,this._distribution=i,this._range=null!=e&&Range.validate(e)?e:this._distribution.getRange(),null!=this._distribution?this._maxY=this._generateValues():(this._options.xaxis={min:e.getMinimum(),max:e.getMaximum()},this._options.yaxis={max:1}),this.render()},setHover:function(t){function i(t,i,e,n){$('<div id="jstat_tooltip">'+e+"</div>").css({position:"absolute",display:"none",top:i+15,"font-size":"small",left:t+5,border:"1px solid "+n[1],color:n[2],padding:"5px","background-color":n[0],opacity:.8}).appendTo("body").show()}if(t){null==this._options.grid?this._options.grid={hoverable:!0,mouseActiveRadius:25}:(this._options.grid.hoverable=!0,this._options.grid.mouseActiveRadius=25);var e=null;$(this._container).bind("plothover",function(t,n,a){if($("#x").text(n.x.toFixed(2)),$("#y").text(n.y.toFixed(2)),a){if(e!=a.datapoint){e=a.datapoint,$("#jstat_tooltip").remove();var r=jstat.toSigFig(a.datapoint[0],2),s=jstat.toSigFig(a.datapoint[1],2),o=null,u=a.series.color;"PDF"==a.series.label?(o="P("+r+") = "+s,u=["#fee","#fdd","#C05F5F"]):(o="F("+r+") = "+s,u=["#eef","#ddf","#4A4AC0"]),i(a.pageX,a.pageY,o,u)}}else $("#jstat_tooltip").remove(),e=null}),$(this._container).bind("mouseleave",function(){$("#jstat_tooltip").is(":visible")&&($("#jstat_tooltip").remove(),e=null)})}else null==this._options.grid?this._options.grid={hoverable:!1}:this._options.grid.hoverable=!1,$(this._container).unbind("plothover");this.render()},setType:function(t){this._plotType=t;var i={},e={};"line"==this._plotType?(i.show=!0,e.show=!1):"points"==this._plotType?(i.show=!1,e.show=!0):"both"==this._plotType&&(i.show=!0,e.show=!0),null==this._options.series?this._options.series={lines:i,points:e}:(null==this._options.series.lines?this._options.series.lines=i:this._options.series.lines.show=i.show,null==this._options.series.points?this._options.series.points=e:this._options.series.points.show=e.show),this.render()},setFill:function(t){this._fill=t,null==this._options.series?this._options.series={lines:{fill:t}}:null==this._options.series.lines?this._options.series.lines={fill:t}:this._options.series.lines.fill=t,this.render()},clear:function(){this._super(),this._distribution=null,this._pdfValues=[],this._cdfValues=[],this.render()},_generateValues:function(){this._cdfValues=[],this._pdfValues=[];var t=this._range.getPoints();this._options.xaxis={min:t[0],max:t[t.length-1]};for(var i=this._distribution.density(this._range),e=this._distribution.cumulativeDensity(this._range),n=0;n<t.length;n++)(i[n]==Number.POSITIVE_INFINITY||i[n]==Number.NEGATIVE_INFINITY)&&(i[n]=null),(e[n]==Number.POSITIVE_INFINITY||e[n]==Number.NEGATIVE_INFINITY)&&(e[n]=null),this._pdfValues.push([t[n],i[n]]),this._cdfValues.push([t[n],e[n]]);return jstat.max(i)},showPDF:function(){this._showPDF=!0,this.render()},hidePDF:function(){this._showPDF=!1,this.render()},showCDF:function(){this._showCDF=!0,this.render()},hideCDF:function(){this._showCDF=!1,this.render()},setDistribution:function(t,i){this._distribution=t,this._range=null!=i?i:t.getRange(),this._maxY=this._generateValues(),this._options.yaxis={max:1.1*this._maxY},this.render()},getDistribution:function(){return this._distribution},getRange:function(){return this._range},setRange:function(t){this._range=t,this._generateValues(),this.render()},render:function(){null!=this._distribution?this._showPDF&&this._showCDF?(this.setData([{yaxis:1,data:this._pdfValues,color:"rgb(237,194,64)",clickable:!1,hoverable:!0,label:"PDF"},{yaxis:2,data:this._cdfValues,clickable:!1,color:"rgb(175,216,248)",hoverable:!0,label:"CDF"}]),this._options.yaxis={max:1.1*this._maxY}):this._showPDF?(this.setData([{data:this._pdfValues,hoverable:!0,color:"rgb(237,194,64)",clickable:!1,label:"PDF"}]),this._options.yaxis={max:1.1*this._maxY}):this._showCDF&&(this.setData([{data:this._cdfValues,hoverable:!0,color:"rgb(175,216,248)",clickable:!1,label:"CDF"}]),this._options.yaxis={max:1.1}):this.setData([]),this._super()}}),DistributionFactory={};DistributionFactory.build=function(t){if(t.NormalDistribution){if(null!=t.NormalDistribution.mean&&null!=t.NormalDistribution.standardDeviation)return new NormalDistribution(t.NormalDistribution.mean[0],t.NormalDistribution.standardDeviation[0]);throw"Malformed JSON provided to DistributionBuilder "+t}if(t.LogNormalDistribution){if(null!=t.LogNormalDistribution.location&&null!=t.LogNormalDistribution.scale)return new LogNormalDistribution(t.LogNormalDistribution.location[0],t.LogNormalDistribution.scale[0]);throw"Malformed JSON provided to DistributionBuilder "+t}if(t.BetaDistribution){if(null!=t.BetaDistribution.alpha&&null!=t.BetaDistribution.beta)return new BetaDistribution(t.BetaDistribution.alpha[0],t.BetaDistribution.beta[0]);throw"Malformed JSON provided to DistributionBuilder "+t}if(t.GammaDistribution){if(null!=t.GammaDistribution.shape&&null!=t.GammaDistribution.scale)return new GammaDistribution(t.GammaDistribution.shape[0],t.GammaDistribution.scale[0]);throw"Malformed JSON provided to DistributionBuilder "+t}if(t.StudentTDistribution){if(null!=t.StudentTDistribution.degreesOfFreedom&&null!=t.StudentTDistribution.nonCentralityParameter)return new StudentTDistribution(t.StudentTDistribution.degreesOfFreedom[0],t.StudentTDistribution.nonCentralityParameter[0]);if(null!=t.StudentTDistribution.degreesOfFreedom)return new StudentTDistribution(t.StudentTDistribution.degreesOfFreedom[0]);throw"Malformed JSON provided to DistributionBuilder "+t}throw"Malformed JSON provided to DistributionBuilder "+t};
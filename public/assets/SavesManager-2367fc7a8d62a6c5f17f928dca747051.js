function SavesManager(e,t,a,n,s,i){if(this.div=e,this.canSaveFlag=s,this.preLoadFunction=t,this.postLoadFunction=a,this.saveAsFunction=n,this.initAreas(),"undefined"!=typeof i)for(var o=0;o<i.length;o++)this.addEntry(i[o]);$(this.savesList.firstChild).trigger("click"),this.displayingNewSave=!1}SavesManager.prototype.canSave=function(){return this.canSaveFlag},SavesManager.prototype.setCanSave=function(e){this.canSaveFlag=e},SavesManager.prototype.initAreas=function(){this.div.style.position="relative",this.appendNewButton(),this.savesList=document.createElement("div"),this.savesList.className="saveList",this.sLWrapper=document.createElement("div"),this.sLWrapper.appendChild(this.savesList),this.sLWrapper.className="saveListWrapper",this.div.appendChild(this.sLWrapper)},SavesManager.prototype.createNewSave=function(){if(!this.displayingNewSave&&this.canSaveFlag){this.displayingNewSave=!0;var e=document.createElement("div");e.className="newSaveEntryButton",$(e).css("position","absolute"),$(e).css("bottom","1px");var t=document.createElement("input");t.className="saveEntryNewName";var a=this;t.onkeydown=function(n){13==n.keyCode&&(a.saveAsFunction($(t).val()),e.parentNode.removeChild(e),a.displayingNewSave=!1,document.querySelector("#newSaveButton").style.display="")},e.appendChild(t),this.div.insertBefore(e,document.querySelector("#newSaveButton")),document.querySelector("#newSaveButton").style.display="none",t.focus()}},SavesManager.prototype.appendNewButton=function(){var e=document.createElement("div");e.className="newSaveEntryButton",e.id="newSaveButton",$(e).css("bottom","1px"),$(e).css("position","absolute");var t=this;e.onclick=function(){t.createNewSave()};var a=document.createElement("p");a.innerHTML="New Save",a.className="newSaveName";var n=document.createElement("i");n.className="icon-plus-circled newSaveIcon",e.appendChild(a),e.appendChild(n),this.div.appendChild(e)},SavesManager.prototype.setSelected=function(e){$(this.currentSelected).removeClass("selected"),$(e).addClass("selected"),this.currentSelected=e},SavesManager.prototype.addEntry=function(e){var t=this;console.log(e);var a=function(){t.preLoadFunction(),t.setSelected(this),$.get(e.load_url,function(e,a){t.postLoadFunction(e,a)})},n=$("<div/>",{"class":"saveEntry",click:a});$("<p/>",{"class":"saveEntryName",text:e.name}).appendTo(n),$("<p/>",{"class":"saveEntryDate",text:e.timestamp}).appendTo(n);var s=function(t){$.get(e.delete_url,function(){var e=n[0].previousSibling;e||(e=n[0].nextSibling),n[0].parentNode.removeChild(n[0]),$(e).trigger("click")}),t.stopPropagation()};$("<i/>",{"class":"icon-ios7-trash bigTrashIcon",click:s}).appendTo(n),$(this.savesList).prepend(n[0]),this.setSelected(n[0])};
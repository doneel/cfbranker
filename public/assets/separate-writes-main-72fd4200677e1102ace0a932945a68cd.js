function initPausers(){!function(){dataPauser=new DivPauser(document.querySelector(".rightSide")),codePauser=new DivPauser(document.querySelector(".workPane"))}()}function updateData(e){return teams=dm.updateData(e),dataPauser.off(),runAlgorithm(),teams}function runAlgorithm(){cw.postMessage({newCode:editor.getText(),rawData:dm.getRawData()},"*")}function remap(e){for(var t={},n=0;n<e.length;n++)t[e[n].name]=e[n];for(var o={},a=0;a<e.length;a++)for(var r=e[a],u=0;u<e[a].schedule.length;u++){var d=r.schedule[u];d.opp=t[d.opp],d.team=e[a];var s=o[d.game_code];s?(d.opp_game=s,s.opp_game=d):o[d.game_code]=d}return e}function initializeSaveAsForm(){$("#saveAsForm").submit(function(){savePauser.on(),document.getElementById("saveas_form_code").value=editor.getText(),console.log(editor.getText()),console.log(document.getElementById("saveas_form_code").value)}).bind("ajax:complete",function(){savePauser.off()}).bind("ajax:success",function(e,t){console.log(t),sm.addEntry(t),$("#save_form_id").val(t.id)}).bind("ajax:failure",function(e,t,n){console.log("error!: "+n)})}function initializeSaveForm(){var e=this;$("#saveForm").submit(function(){e.savePauser.on()}),$("#saveForm").bind("ajax:success",function(){e.savePauser.off()})}$(document).ready(function(){console.log(this),console.log("RUNNING"),initializeSaveForm(),initializeSaveAsForm(),editor=new CodeEditor("codeEditorContainer","javascript",saveCode),expandingDiv=new ExpandingDiv(document.querySelector(".saveBar"),"0%","100%",function(){editor.resize()}),$(function(){$("select").selectric()}),initPausers(),sm=new SavesManager(document.querySelector(".saveBar"),preLoad,loadSave,saveAs,!0,savesArr),function(){savePauser=new DivPauser(document.querySelector(".saveList"))}(),cw=document.querySelector(".resultsPanel").contentWindow,dm=new DataManager(document.querySelector("#yearBox"),document.querySelector("#weekBox"),numWeeksMap,getData,updateData,remap),hD=new MessageButton(document.getElementById("helpIcon"),document.getElementById("helpDialog"),document.getElementById("helpBackground"),"active"),iD=new MessageButton(document.getElementById("infoIcon"),document.getElementById("infoDialog"),document.getElementById("infoBackground"),"active"),shareDialog=new MessageButton(document.getElementById("shareButton"),document.getElementById("shareDialog"),document.getElementById("shareBackground"),"active"),state.signed_in||(sm.setCanSave(!1),hD1=new MessageButton(document.getElementById("newSaveButton"),document.getElementById("loginDialog"),document.getElementById("loginBackground"),"active"),hD2=new MessageButton(document.getElementById("saveButton"),document.getElementById("loginDialog"),document.getElementById("loginBackground"),"active")),$("#helpIcon").css("display","block"),dataPauser.on(),$("iframe.resultsPanel").load(function(){dm.requestData()})});var getData=function(e,t,n){dataPauser.on();$.get("/req_data?year="+e[0]+"&week="+e[1],function(e){t(e,n)})},preLoad=function(){!function(){codePauser.on()}()},loadSave=function(e){codePauser.off(),editor.loadText(e.code),$("#save_form_id").val(e.id),runAlgorithm()},saveAs=function(e){editor.setDefaultText(),document.getElementById("saveas_form_name").value=e,$("#saveAsForm").submit()},saveCode=function(e){return state.signed_in?("undefined"==typeof e&&(e=editor.getText()),document.getElementById("save_form_code").value=e,$("#saveForm").submit(),void 0):!1};